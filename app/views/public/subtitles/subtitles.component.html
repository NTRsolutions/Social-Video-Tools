<div class="socialvideotool">
	
	<div class="s-mainmenu">
		<div>
			<label class="btn btn-secondary btn-upload">
				<input type="file" name="video" (change)="createNewProject($event)">New
			</label>
			<button type="button" class="btn btn-secondary" (click)="''">Open</button>
		</div>
	</div>

	<div class="s-submenu" *ngIf="(projectRef | async)">

		<!--progressbar upload-->
		<div class="s-progress" *ngIf="uploadProgress > 0 && uploadProgress < 100">
			<div class="s-progress__label">upload</div>
			<div class="s-progress__bg" *ngIf="uploadProgress">
				<div class="s-progress__bar" [style.width]="uploadProgress + '%'"></div>
			</div>
		</div>

		<!--progressbar downscaling-->
		<div class="s-progress" *ngIf="(projectRef | async)?.status?.downScaleProgress > 0 && (projectRef | async)?.status?.downScaleProgress < 100">
			<div class="s-progress__label">downscaling</div>
			<div class="s-progress__bg" *ngIf="(projectRef | async)?.status.downScaleProgress">
				<div class="s-progress__bar" [style.width]="(projectRef | async)?.status?.downScaleProgress + '%'"></div>
			</div>
		</div>
		
		<!--once downscaled show controls-->
		<div *ngIf="(projectRef | async)?.status?.downscaled">
			<label class="btn btn-secondary btn-upload">
				<input type="file" name="video" (change)="uploadSource($event)">Change Source
			</label>
			<button type="button" class="btn btn-secondary" (click)="addAnnotation()">Add Annotation(U)</button>
			<button type="button" class="btn btn-secondary" (click)="addToRenderQueue()">Render Movie(R)</button>
		</div>
	</div>
	
	<div class="s-sub-controls" *ngIf="(projectRef | async)?.status?.downscaled">
		
		<!--subs-->
		<div class="s-sub__wrapper">
			<!--subtitles column-->
			<div class="s-sub-items">
				<div *ngFor="let annotation of annotationsRef | async" class="s-sub-item">
					<div (click)="setSelectedAnnotation(annotation)">
						{{annotation.start | json}} | {{annotation.end | json}}
					</div> 
				</div>
			</div>

			<!--template column-->
			<div class="s-sub-templates">
				<div class="s-sub-template">
					template 1
				</div>
				<div class="s-sub-template">
					template 2
				</div>
			</div>

			<!--inputs column-->
			<div class="s-sub-inputs">
				<div class="">
					inputs here
				</div>
				<div class="s-sub-input">
					inputs here
				</div>
				<div class="s-sub-input">
					inputs here
				</div>
				<div class="s-sub-input">
					inputs here
				</div>
			</div>
		</div>

		<!--video-->
		<div class="s-video_wrapper">
			<div class="s-video">
				<vrtvideo-player 
					[clip]="(clipRef | async)"
					[selectedAnnotation]="selectedAnnotation">
				</vrtvideo-player>

				<range-slider *ngIf="selectedAnnotation"
					[selectedAnnotation]="selectedAnnotation" 
					[clip]="(clipRef | async)" (change)="updateAnnotation($event)">
				</range-slider>
			</div>
		</div>

	</div>
	
	<small class="">{{ projectRef | async | json }}</small><br>

</div>